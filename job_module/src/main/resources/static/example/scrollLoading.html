<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script src="../js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
    $(function () {
      AddSth();
    });
    $(function () {
      $(".main").unbind("scroll").bind("scroll", function (e) {
        var sum = this.scrollHeight;
        if (sum <= $(this).scrollTop() + $(this).height()) {
          AddSth();
        }
      });
    });
<!--    function AddSth() {-->
<!--      $.ajax({-->
<!--        type: 'POST',-->
<!--        url: "index.aspx/ReturnSth",-->
<!--        dataType: "json",-->
<!--        contentType: "application/json; charset=utf-8",-->
<!--        //data: "",-->
<!--        success: function (data) {-->
<!--          json = $.parseJSON(data.d);-->
<!--          for (var i in json) {-->
<!--            var tbBody = "<ul><li>" + json[i].sth + "</li></ul>";-->
<!--            $(".main").append(tbBody);-->
<!--          }-->
<!--          $(".main").append("<hr />");-->
<!--        }-->
<!--      });-->
<!--    }-->

 function AddSth() {
          var data='[ {"content":"<p>&nbsp;today is 4.11</p>","date":"2014-04-11","hasread":0,"id":25,"title":"4.11","username":"123"},{"content":"<p>&nbsp;today is 4.11</p>","date":"2014-04-11","hasread":0,"id":25,"title":"4.11","username":"123"},{"content":"<p>&nbsp;today is 4.11</p>","date":"2014-04-11","hasread":0,"id":25,"title":"4.11","username":"123"}]';
<!--          json = $.parseJSON(data);-->
         var json = JSON.parse(data);
         for(var i=0;i< json.length;i++){
             var tbBody = "<ul><li>" + json[i].content + "</li></ul>";
            $(".main").append(tbBody);
         }
          $(".main").append("<hr />");
    }
  </script>
</head>
<body>
<form id="form1" runat="server">
    <div>下拉加载更多</div><br />
    <div class="main" style="border: 1px solid red; height: 100px; overflow: auto;"></div>
</form>
</body>
</html>
<!--[{"content":"<p>&nbsp;today is 4.11</p>","date":"2014-04-11","hasread":0,"id":25,"title":"4.11","username":"123"}]-->
<!--for(var i= 0; i< dataRole.length;i++)-->
<!--{-->
<!--var html = "<tr><td>";-->
<!--    html = html + dataRole[i].title+"</td><td>";-->
<!--    }-->


<!--stringify()用于从一个对象解析出字符串，如-->

<!--var a = {a:1,b:2}-->

<!--结果：-->

<!--JSON.stringify(a)-->

<!--"{"a":1,"b":2}"-->




<!--============================-->
<!--parse 从一个字符串中解析出json对象：-->

<!--var str = '{"name":"huangxiaojian","age":"23"}'-->
<!--结果：-->
<!--JSON.parse(str)-->
<!--Object-->
<!--age: "23"-->
<!--name: "huangxiaojian"-->
<!--__proto__: Object-->